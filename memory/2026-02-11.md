## OpenClaw自动更新 (01:44)

### 需求
李行："你每天也检查一下自己有没有更新，如果有新版本的话，就自动更新吧"

### 实施方案

#### 1. 创建更新检查脚本
**文件**: `scripts/check-update.sh`

**功能**:
- 获取当前版本: `openclaw --version`
- 查询最新版本: `npm view openclaw version`
- 比较版本号
- 如果有新版本，自动执行 `npm update -g openclaw`
- 记录更新日志到 `update-log.txt`

#### 2. 配置每日定时任务
**Cron配置**:
- **时间**: 每天早上9:00（Asia/Shanghai）
- **任务**: 执行更新检查脚本并报告结果
- **会话**: main（主会话）
- **ID**: 8d6b5574-80bf-47fa-97a5-5b607c039320

**Cron表达式**: `0 9 * * *`

#### 3. 测试结果
```bash
🔍 检查 OpenClaw 更新...
当前版本: 2026.2.9
最新版本: 2026.2.9
✅ 已是最新版本
```

### 工作流程

```
每天9:00
    ↓
执行 check-update.sh
    ↓
检查版本
    ↓
如果有新版本
    ↓
npm update -g openclaw
    ↓
验证更新成功
    ↓
记录日志
    ↓
在主会话报告结果
```

### 更新日志格式
```
[2026-02-11 09:00:00] 更新: 2026.2.9 → 2026.2.10
[2026-02-12 09:00:00] 已是最新版本: 2026.2.10
```

### 手动检查更新
```bash
# 运行检查脚本
bash /Users/haoc/.openclaw/workspace/scripts/check-update.sh

# 查看更新日志
cat /Users/haoc/.openclaw/workspace/update-log.txt
```

### 文档产出
- `scripts/check-update.sh` - 自动更新检查脚本
- Cron任务已配置（每日9:00）

### 关键特性
1. **自动化**: 无需人工干预
2. **安全**: 先检查再更新，验证成功
3. **日志**: 记录所有更新历史
4. **通知**: 在主会话报告结果
5. **可靠**: 错误处理和退出码

### 下次更新时
当OpenClaw发布新版本（如2026.2.10）时：
1. 明天9:00自动检查
2. 发现新版本
3. 自动更新
4. 在飞书主会话通知："✅ OpenClaw已更新到2026.2.10"
